schema: '2.0'
stages:
  build_dataset:
    cmd: uv run src/build_dataset.py data/CICIDS2017_improved
    deps:
    - path: data/CICIDS2017_improved
      hash: md5
      md5: 97448ae36a9acd7110a7c6dafed93e84.dir
      size: 1152270765
      nfiles: 5
    - path: src/build_dataset.py
      hash: md5
      md5: 164cafae32a94d90b1a75c2e964dc637
      size: 4902
    params:
      params.yaml:
        dataset_name: CICIDS2017_improved
    outs:
    - path: data/test/raw
      hash: md5
      md5: 8120555beb065943fd62f635ff727354.dir
      size: 61306713
      nfiles: 7
    - path: data/train/raw
      hash: md5
      md5: 77b679e6b7511d009cd702eafeebcee1.dir
      size: 143222048
      nfiles: 15
    - path: log/build_dataset.log
      hash: md5
      md5: d666e1d724aa67c2351276dbe5fb8ed8
      size: 435
  categorical_binary:
    cmd: uv run src/categorical_binary.py
    deps:
    - path: data/test/raw
      hash: md5
      md5: 8120555beb065943fd62f635ff727354.dir
      size: 61306713
      nfiles: 7
    - path: data/train/raw
      hash: md5
      md5: 77b679e6b7511d009cd702eafeebcee1.dir
      size: 143222048
      nfiles: 15
    - path: src/categorical_binary.py
      hash: md5
      md5: cb2151b59fcbde472a98cb2f373d1d60
      size: 4445
    outs:
    - path: data/test/binary
      hash: md5
      md5: bd657138dfbed4f02a7293962b2bdcb9.dir
      size: 62455662
      nfiles: 7
    - path: data/train/binary
      hash: md5
      md5: 964f29244fb731b6ba117f8260f195f8.dir
      size: 145907904
      nfiles: 15
    - path: log/categorical_binary.log
      hash: md5
      md5: 921a60a5e80f82aa5a4f9eb2c5140184
      size: 1243
  train:
    cmd: uv run src/train.py data/train/raw
    deps:
    - path: data/train/raw
      hash: md5
      md5: 77b679e6b7511d009cd702eafeebcee1.dir
      size: 143222048
      nfiles: 15
    - path: src/train.py
      hash: md5
      md5: 5f7c9fca8d205930e59a5eb81cd41ff5
      size: 2312
    params:
      params.yaml:
        train.data_path: data/train/raw
    outs:
    - path: log/train.log
      hash: md5
      md5: 6011a5dfe44a62ada13a0b85bc9c0971
      size: 338
    - path: model/improved_c45_model.joblib
      hash: md5
      md5: b6336da32d97b0ff1043a0d705c3f9d1
      size: 5017
  evaluate:
    cmd: uv run src/evaluate.py data/test/binary
    deps:
    - path: data/test/binary
      hash: md5
      md5: da3ef10054d2c6897a99114225c039f4.dir
      size: 62498355
      nfiles: 7
    - path: model/improved_c45_model.joblib
      hash: md5
      md5: 53ed0708dd8bc1ff0a16b36b4864f247
      size: 5485
    - path: src/evaluate.py
      hash: md5
      md5: 3dd89ed577df5bed4f393157be616d89
      size: 1865
    params:
      params.yaml:
        evaluate.data_path: data/test/binary
    outs:
    - path: log/evaluate.log
      hash: md5
      md5: 4a8efc9d1b58b169d3b04e63f1f065a8
      size: 441
  train_drl:
    cmd: uv run src/train_drl.py data/train/binary
    deps:
    - path: data/train/binary
      hash: md5
      md5: 7f19bb8a8fa914291bc77f1b3ef3a37e.dir
      size: 145866811
      nfiles: 15
    - path: src/train_drl.py
      hash: md5
      md5: 43cb3908a8a0136318bc8d0eb8ba09ad
      size: 13190
    params:
      params.yaml:
        train.data_path: data/train/binary
        train_drl.batch_size: 1024
        train_drl.eps_decay: 10000
        train_drl.eps_end: 0.05
        train_drl.eps_start: 0.9
        train_drl.gamma: 0.99
        train_drl.lr: 0.1
        train_drl.memory_size: 100000
        train_drl.n_episodes: 100
        train_drl.port_dim: 32
        train_drl.protocol_dim: 8
        train_drl.sample_size: 1000
        train_drl.tau: 0.005
        train_drl.update_target_steps: 200
    outs:
    - path: log/train_drl.log
      hash: md5
      md5: 4ed821817aba6f9d806c13447228e5da
      size: 145
    - path: log/train_result.log
      hash: md5
      md5: ed5bad1099cb34a54d7daee76c23d770
      size: 37910
    - path: model/drl_model.pth
      hash: md5
      md5: 4f498a2760dc8dcf59e3d97de3b10b03
      size: 2479785
  evaluate_drl:
    cmd: uv run src/evaluate_drl.py data/test/binary
    deps:
    - path: data/test/binary
      hash: md5
      md5: da3ef10054d2c6897a99114225c039f4.dir
      size: 62498355
      nfiles: 7
    - path: model/drl_model.pth
      hash: md5
      md5: 4f498a2760dc8dcf59e3d97de3b10b03
      size: 2479785
    - path: src/evaluate_drl.py
      hash: md5
      md5: 0db60267ce5bc392112670c71ace6027
      size: 5249
    params:
      params.yaml:
        evaluate.data_path: data/test/binary
        evaluate.plot: true
    outs:
    - path: evaluate/plots
      hash: md5
      md5: 3fbcff35d4c4739b67f7fe70fac3e4cc.dir
      size: 23645
      nfiles: 1
    - path: log/evaluate_drl.log
      hash: md5
      md5: de9cdf30fdcde8a8cf36d7e2f22c8986
      size: 242
