schema: '2.0'
stages:
  build_dataset:
    cmd: uv run src/build_dataset.py data/CICIDS2017_improved
    deps:
    - path: data/CICIDS2017_improved
      hash: md5
      md5: 97448ae36a9acd7110a7c6dafed93e84.dir
      size: 1152270765
      nfiles: 5
    - path: src/build_dataset.py
      hash: md5
      md5: 549c485423c2baa7e0fe91f4409c4721
      size: 5058
    params:
      params.yaml:
        dataset_name: CICIDS2017_improved
    outs:
    - path: data/test/raw
      hash: md5
      md5: 5757e421ac543c184d75609fb231769c.dir
      size: 61359673
      nfiles: 7
    - path: data/train/raw
      hash: md5
      md5: 288f5d7c7b4d441c32e7d57c97cccd31.dir
      size: 143159100
      nfiles: 15
    - path: log/build_dataset.log
      hash: md5
      md5: 0a3a620a5c7650495556d0dd91618e71
      size: 435
  categorical_binary:
    cmd: uv run src/categorical_binary.py
    deps:
    - path: data/test/raw
      hash: md5
      md5: 5757e421ac543c184d75609fb231769c.dir
      size: 61359673
      nfiles: 7
    - path: data/train/raw
      hash: md5
      md5: 288f5d7c7b4d441c32e7d57c97cccd31.dir
      size: 143159100
      nfiles: 15
    - path: src/categorical_binary.py
      hash: md5
      md5: 1e2e21d47879a5186318408d3f93fd40
      size: 4979
    outs:
    - path: data/test/binary
      hash: md5
      md5: dbec579426c10b5bf987234c802df353.dir
      size: 62508745
      nfiles: 7
    - path: data/train/binary
      hash: md5
      md5: ca8f8b2a6084168ede27688126ea6a24.dir
      size: 145847837
      nfiles: 15
    - path: log/categorical_binary.log
      hash: md5
      md5: a2736252a891b48feff5470432ba7d87
      size: 1243
  train:
    cmd: uv run src/train.py data/train/binary
    deps:
    - path: data/train/binary
      hash: md5
      md5: ca8f8b2a6084168ede27688126ea6a24.dir
      size: 145847837
      nfiles: 15
    - path: src/train.py
      hash: md5
      md5: 432136c3c542f644b82f6d892315a05b
      size: 2830
    params:
      params.yaml:
        train.data_path: data/train/binary
    outs:
    - path: log/train.log
      hash: md5
      md5: 5a64bce70bb1d3f96539575dab419603
      size: 338
    - path: model/improved_c45_model.joblib
      hash: md5
      md5: 4a09061dcd003411e272ede4f0e533e2
      size: 5485
  evaluate:
    cmd: uv run src/evaluate.py data/test/binary
    deps:
    - path: data/test/binary
      hash: md5
      md5: dbec579426c10b5bf987234c802df353.dir
      size: 62508745
      nfiles: 7
    - path: model/improved_c45_model.joblib
      hash: md5
      md5: 4a09061dcd003411e272ede4f0e533e2
      size: 5485
    - path: src/evaluate.py
      hash: md5
      md5: 0b809db2705c94c8d83db040f1223259
      size: 3327
    params:
      params.yaml:
        evaluate.data_path: data/test/binary
    outs:
    - path: log/evaluate.log
      hash: md5
      md5: 9871157258ef57f22dbcfafff7472eb0
      size: 132
  train_drl:
    cmd: uv run src/train_drl.py data/train/binary
    deps:
    - path: data/train/binary
      hash: md5
      md5: ca8f8b2a6084168ede27688126ea6a24.dir
      size: 145847837
      nfiles: 15
    - path: src/train_drl.py
      hash: md5
      md5: 24141b4ebc086b231e00701e81431cb0
      size: 22630
    params:
      params.yaml:
        train.data_path: data/train/binary
        train_drl.batch_size: 32
        train_drl.eps_decay: 10000000
        train_drl.eps_end: 0.05
        train_drl.eps_start: 0.9
        train_drl.gamma: 0.99
        train_drl.include_category: false
        train_drl.lr: 0.001
        train_drl.max_data_length:
        train_drl.memory_size: 100000
        train_drl.n_episodes: 1
        train_drl.port_dim: 32
        train_drl.protocol_dim: 8
        train_drl.tau: 0.005
        train_drl.update_target_steps: 200
    outs:
    - path: log/train_drl.log
      hash: md5
      md5: e9b93ff1fb55043941a00d3868b82bd3
      size: 910
    - path: log/train_result.log
      hash: md5
      md5: 2e76fc1b9d69589529503bdb44fe1181
      size: 762
    - path: model/drl_model.pth
      hash: md5
      md5: 253f7188dc72b3eb9fe52aee3b13feaa
      size: 2347053
  evaluate_drl:
    cmd: uv run src/evaluate_drl.py data/test/binary
    deps:
    - path: data/test/binary
      hash: md5
      md5: dbec579426c10b5bf987234c802df353.dir
      size: 62508745
      nfiles: 7
    - path: model/drl_model.pth
      hash: md5
      md5: 253f7188dc72b3eb9fe52aee3b13feaa
      size: 2347053
    - path: src/evaluate_drl.py
      hash: md5
      md5: 45df134789b43874b19c9b678eb648f8
      size: 8492
    params:
      params.yaml:
        evaluate.data_path: data/test/binary
        evaluate.plot: true
        evaluate_drl.include_category: false
    outs:
    - path: evaluate/plots
      hash: md5
      md5: 749c55776dd33519222a16efe6e1dfa2.dir
      size: 18085
      nfiles: 1
    - path: log/evaluate_drl.log
      hash: md5
      md5: 649a2ae467925ac7b175ec7c735b9a7d
      size: 242
