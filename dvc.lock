schema: '2.0'
stages:
  build_dataset:
    cmd: uv run src/build_dataset.py data/CICIDS2017_improved
    deps:
    - path: data/CICIDS2017_improved
      hash: md5
      md5: 97448ae36a9acd7110a7c6dafed93e84.dir
      size: 1152270765
      nfiles: 5
    - path: src/build_dataset.py
      hash: md5
      md5: 7a84217a2c62237110fe1d1173baf23b
      size: 4367
    params:
      params.yaml:
        dataset_name: CICIDS2017_improved
    outs:
    - path: data/test/raw
      hash: md5
      md5: 3f777f58a5240b2df4319a12fd2a177a.dir
      size: 61348470
      nfiles: 7
    - path: data/train/raw
      hash: md5
      md5: 736a4a965ee8ef41c561057179625b8d.dir
      size: 143173424
      nfiles: 15
    - path: log/build_dataset.log
      hash: md5
      md5: 98a46eccef007a56fabc6a6961626315
      size: 503
  categorical_binary:
    cmd: uv run src/categorical_binary.py
    deps:
    - path: data/test/raw
      hash: md5
      md5: 3f777f58a5240b2df4319a12fd2a177a.dir
      size: 61348470
      nfiles: 7
    - path: data/train/raw
      hash: md5
      md5: 736a4a965ee8ef41c561057179625b8d.dir
      size: 143173424
      nfiles: 15
    - path: src/categorical_binary.py
      hash: md5
      md5: 7d4dc47fc9f3618609b20f4028265a66
      size: 3867
    outs:
    - path: data/test/binary
      hash: md5
      md5: da3ef10054d2c6897a99114225c039f4.dir
      size: 62498355
      nfiles: 7
    - path: data/train/binary
      hash: md5
      md5: 7f19bb8a8fa914291bc77f1b3ef3a37e.dir
      size: 145866811
      nfiles: 15
    - path: log/categorical_binary.log
      hash: md5
      md5: 38a6a0a3ff2a5176414da4adf06e63d0
      size: 1243
  train:
    cmd: uv run src/train.py data/train/raw
    deps:
    - path: data/train/raw
      hash: md5
      md5: 736a4a965ee8ef41c561057179625b8d.dir
      size: 143173424
      nfiles: 15
    - path: src/train.py
      hash: md5
      md5: d3a8730c111430acbeee9c522ead44db
      size: 1715
    params:
      params.yaml:
        train.data_path: data/train/raw
    outs:
    - path: log/train.log
      hash: md5
      md5: de0f13332b7748beafc6ab100e5a2e26
      size: 338
    - path: model/improved_c45_model.joblib
      hash: md5
      md5: fc013c8953a9d028a182f9fd01c45972
      size: 5069
  evaluate:
    cmd: uv run src/evaluate.py data/test/raw
    deps:
    - path: data/test/raw
      hash: md5
      md5: 3f777f58a5240b2df4319a12fd2a177a.dir
      size: 61348470
      nfiles: 7
    - path: model/improved_c45_model.joblib
      hash: md5
      md5: fc013c8953a9d028a182f9fd01c45972
      size: 5069
    - path: src/evaluate.py
      hash: md5
      md5: 3dd89ed577df5bed4f393157be616d89
      size: 1865
    params:
      params.yaml:
        evaluate.data_path: data/test/raw
    outs:
    - path: log/evaluate.log
      hash: md5
      md5: 1935ac4d6c3a6d061577ff2c3ad535da
      size: 442
  train_drl:
    cmd: uv run src/train_drl.py data/train/binary
    deps:
    - path: data/train/binary
      hash: md5
      md5: 7f19bb8a8fa914291bc77f1b3ef3a37e.dir
      size: 145866811
      nfiles: 15
    - path: src/train_drl.py
      hash: md5
      md5: 43cb3908a8a0136318bc8d0eb8ba09ad
      size: 13190
    params:
      params.yaml:
        train.data_path: data/train/binary
        train_drl.batch_size: 1024
        train_drl.eps_decay: 10000
        train_drl.eps_end: 0.05
        train_drl.eps_start: 0.9
        train_drl.gamma: 0.99
        train_drl.lr: 0.1
        train_drl.memory_size: 100000
        train_drl.n_episodes: 100
        train_drl.port_dim: 32
        train_drl.protocol_dim: 8
        train_drl.sample_size: 1000
        train_drl.tau: 0.005
        train_drl.update_target_steps: 200
    outs:
    - path: log/train_drl.log
      hash: md5
      md5: 4ed821817aba6f9d806c13447228e5da
      size: 145
    - path: log/train_result.log
      hash: md5
      md5: ed5bad1099cb34a54d7daee76c23d770
      size: 37910
    - path: model/drl_model.pth
      hash: md5
      md5: 4f498a2760dc8dcf59e3d97de3b10b03
      size: 2479785
  evaluate_drl:
    cmd: uv run src/evaluate_drl.py data/test/binary
    deps:
    - path: data/test/binary
      hash: md5
      md5: da3ef10054d2c6897a99114225c039f4.dir
      size: 62498355
      nfiles: 7
    - path: model/drl_model.pth
      hash: md5
      md5: 4f498a2760dc8dcf59e3d97de3b10b03
      size: 2479785
    - path: src/evaluate_drl.py
      hash: md5
      md5: 0db60267ce5bc392112670c71ace6027
      size: 5249
    params:
      params.yaml:
        evaluate.data_path: data/test/binary
        evaluate.plot: true
    outs:
    - path: evaluate/plots
      hash: md5
      md5: 3fbcff35d4c4739b67f7fe70fac3e4cc.dir
      size: 23645
      nfiles: 1
    - path: log/evaluate_drl.log
      hash: md5
      md5: de9cdf30fdcde8a8cf36d7e2f22c8986
      size: 242
