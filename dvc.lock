schema: '2.0'
stages:
  build_dataset:
    cmd: uv run src/build_dataset.py data/CICIDS2017_improved
    deps:
    - path: data/CICIDS2017_improved
      hash: md5
      md5: 97448ae36a9acd7110a7c6dafed93e84.dir
      size: 1152270765
      nfiles: 5
    - path: src/build_dataset.py
      hash: md5
      md5: 549c485423c2baa7e0fe91f4409c4721
      size: 5058
    params:
      params.yaml:
        dataset_name: CICIDS2017_improved
    outs:
    - path: data/test/raw
      hash: md5
      md5: 4bf620ba0a745d31055b12fe1e137dac.dir
      size: 61359673
      nfiles: 7
    - path: data/train/raw
      hash: md5
      md5: 28bc5f8d4b5fef46b6dfb0f54eec27b1.dir
      size: 143159100
      nfiles: 15
    - path: log/build_dataset.log
      hash: md5
      md5: 69ccc22276b172fb0d50bd82fd35075f
      size: 435
  categorical_binary:
    cmd: uv run src/categorical_binary.py
    deps:
    - path: data/test/raw
      hash: md5
      md5: 4bf620ba0a745d31055b12fe1e137dac.dir
      size: 61359673
      nfiles: 7
    - path: data/train/raw
      hash: md5
      md5: 28bc5f8d4b5fef46b6dfb0f54eec27b1.dir
      size: 143159100
      nfiles: 15
    - path: src/categorical_binary.py
      hash: md5
      md5: 4caa5955a45a96667b03134d9a57103c
      size: 5049
    outs:
    - path: data/test/binary
      hash: md5
      md5: 8bedf59ccb3699ac181478a876271e7a.dir
      size: 62508745
      nfiles: 7
    - path: data/train/binary
      hash: md5
      md5: 7f874e707bea1e6227bb5430fea62de7.dir
      size: 145847837
      nfiles: 15
    - path: log/categorical_binary.log
      hash: md5
      md5: 9c94eb420eec276ab11d88c8778e1083
      size: 1243
  train:
    cmd: uv run src/train.py data/train/binary
    deps:
    - path: data/train/binary
      hash: md5
      md5: 7f874e707bea1e6227bb5430fea62de7.dir
      size: 145847837
      nfiles: 15
    - path: src/train.py
      hash: md5
      md5: 83be84c37cd0bb2222bcb78a34a67763
      size: 2856
    params:
      params.yaml:
        train.data_path: data/train/binary
    outs:
    - path: log/train.log
      hash: md5
      md5: f3419bd79d194164675bb1f4aa296bcd
      size: 338
    - path: model/improved_c45_model.joblib
      hash: md5
      md5: a5fcffa8f12836eeec8066f28c2576fc
      size: 5433
  evaluate:
    cmd: uv run src/evaluate.py data/test/binary
    deps:
    - path: data/test/binary
      hash: md5
      md5: 8bedf59ccb3699ac181478a876271e7a.dir
      size: 62508745
      nfiles: 7
    - path: model/improved_c45_model.joblib
      hash: md5
      md5: a5fcffa8f12836eeec8066f28c2576fc
      size: 5433
    - path: src/evaluate.py
      hash: md5
      md5: baa506876dddbf6003bf4fa68727b404
      size: 3333
    params:
      params.yaml:
        evaluate.data_path: data/test/binary
    outs:
    - path: log/evaluate.log
      hash: md5
      md5: 6ac5c9e484c0deed6ce6cc6216174504
      size: 132
  train_drl:
    cmd: uv run src/train_drl.py data/train/binary
    deps:
    - path: data/train/binary
      hash: md5
      md5: 84692c09d15a0f8237ec7e249648fcc5.dir
      size: 145908032
      nfiles: 15
    - path: src/train_drl.py
      hash: md5
      md5: b94d2f69ec2cacecddb7debddd279f66
      size: 20951
    params:
      params.yaml:
        train.data_path: data/train/binary
        train_drl.batch_size: 32
        train_drl.eps_decay: 10000000
        train_drl.eps_end: 0.05
        train_drl.eps_start: 0.9
        train_drl.gamma: 0.99
        train_drl.include_category: false
        train_drl.lr: 0.001
        train_drl.memory_size: 100000
        train_drl.n_episodes: 1
        train_drl.port_dim: 32
        train_drl.protocol_dim: 8
        train_drl.sample_size: 10000
        train_drl.tau: 0.005
        train_drl.update_target_steps: 200
    outs:
    - path: log/train_drl.log
      hash: md5
      md5: e806014ac92d644abf98d2a13affd39f
      size: 912
    - path: log/train_result.log
      hash: md5
      md5: 5d0040a84bf7159d2c1af7c68144197e
      size: 47410
    - path: model/drl_model.pth
      hash: md5
      md5: b382838288df5d93de0939e2ff4e6d92
      size: 2347053
  evaluate_drl:
    cmd: uv run src/evaluate_drl.py data/test/binary
    deps:
    - path: data/test/binary
      hash: md5
      md5: c0e17a58414c29f2fc71ae6631e70490.dir
      size: 62455852
      nfiles: 7
    - path: model/drl_model.pth
      hash: md5
      md5: b382838288df5d93de0939e2ff4e6d92
      size: 2347053
    - path: src/evaluate_drl.py
      hash: md5
      md5: d78d529f659bdc89b24a8dffad3a8bdc
      size: 8490
    params:
      params.yaml:
        evaluate.data_path: data/test/binary
        evaluate.plot: true
        evaluate_drl.include_category: false
    outs:
    - path: evaluate/plots
      hash: md5
      md5: 5653466f53ded55c62b7f184f445c8a4.dir
      size: 46808
      nfiles: 1
    - path: log/evaluate_drl.log
      hash: md5
      md5: 71231a0c96dc81d46512430494078788
      size: 242
